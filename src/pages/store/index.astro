---
import { Image } from "astro:assets";
import BaseHead from "../../components/BaseHead.astro";
import Footer from "../../components/Footer.astro";
import Header from "../../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../../consts";
import Grupo4030 from "../../assets/Grupo 4030.png";
import Grupo4035 from "../../assets/Grupo 4035.png";
import Grupo4036 from "../../assets/Grupo 4036.png";
import BlogPlaceholder3 from "../../assets/blog-placeholder-3.jpg";
import BlogPlaceholder5 from "../../assets/blog-placeholder-5.jpg";

// Datos de productos
const products = [
	{
		id: 1,
		slug: "airfree",
		name: "AirFree",
		category: "Ventiladores Industriales",
		categorySlug: "ventiladores-industriales",
		image: Grupo4030,
	},
	{
		id: 2,
		slug: "notus",
		name: "Notus",
		category: "Ventiladores Industriales",
		categorySlug: "ventiladores-industriales",
		image: Grupo4036,
	},
	{
		id: 3,
		slug: "classic-home",
		name: "Classic Home",
		category: "Ventiladores Evaporativos",
		categorySlug: "ventiladores-evaporativos",
		image: BlogPlaceholder3,
	},
	{
		id: 4,
		slug: "aircool",
		name: "AirCool",
		category: "Ventiladores Industriales",
		categorySlug: "ventiladores-industriales",
		image: Grupo4030,
	},
	{
		id: 5,
		slug: "classic-r-xl",
		name: "Classic R XL",
		category: "Ventiladores Evaporativos",
		categorySlug: "ventiladores-evaporativos",
		image: BlogPlaceholder5,
	},
	{
		id: 6,
		slug: "eurus-iii",
		name: "Eurus III",
		category: "Ventiladores Industriales",
		categorySlug: "ventiladores-industriales",
		image: Grupo4036,
	},
	{
		id: 7,
		slug: "aircool-2",
		name: "AirCool",
		category: "Ventiladores Industriales",
		categorySlug: "ventiladores-industriales",
		image: Grupo4030,
	},
	{
		id: 8,
		slug: "classic-r-xl-2",
		name: "Classic R XL",
		category: "Ventiladores Evaporativos",
		categorySlug: "ventiladores-evaporativos",
		image: BlogPlaceholder5,
	},
	{
		id: 9,
		slug: "eurus-iii-2",
		name: "Eurus III",
		category: "Ventiladores Industriales",
		categorySlug: "ventiladores-industriales",
		image: Grupo4036,
	},
];
---

<!doctype html>
<html lang="es">
	<head>
		<BaseHead title="Tienda - Voltiak" description="Explora nuestra tienda de ventiladores industriales y evaporativos" />
	</head>
	<body>
		<Header />
		<main class="min-h-screen bg-white pt-24 md:pt-40 pb-16">
			<div class="max-w-7xl mx-auto px-4 md:px-8">
				<!-- Título -->
				<h1 class="text-4xl md:text-6xl font-bold text-[#05192d] mb-8 md:mb-12 font-family-HelveticaNeue">
					Tienda
				</h1>

				<!-- Filtros de categorías -->
				<div class="flex gap-3 md:gap-4 mb-8 md:mb-12 overflow-x-auto pb-2 md:pb-0">
					<button
						data-filter="todos"
						class="filter-btn px-6 py-2 md:px-8 md:py-3 rounded-full text-sm md:text-base font-medium font-family-HelveticaNeue whitespace-nowrap transition-all bg-[#05192d] text-white"
					>
						Todos
					</button>
					<button
						data-filter="ventiladores-industriales"
						class="filter-btn px-6 py-2 md:px-8 md:py-3 rounded-full text-sm md:text-base font-medium font-family-HelveticaNeue whitespace-nowrap transition-all bg-gray-200 text-[#05192d] hover:bg-gray-300"
					>
						Ventiladores Industriales
					</button>
					<button
						data-filter="ventiladores-evaporativos"
						class="filter-btn px-6 py-2 md:px-8 md:py-3 rounded-full text-sm md:text-base font-medium font-family-HelveticaNeue whitespace-nowrap transition-all bg-gray-200 text-[#05192d] hover:bg-gray-300"
					>
						Ventiladores Evaporativos
					</button>
				</div>

				<!-- Grid de productos -->
				<div id="products-grid" class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
					{products.map((product) => (
						<a
							href={`/store/${product.slug}`}
							class="product-card bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow"
							data-category={product.categorySlug}
						>
							<div class="relative aspect-square bg-gray-100">
								<Image
									src={product.image}
									alt={product.name}
									class="w-full h-full object-cover"
								/>
								<!-- Icono de carrito -->
								<button
									class="absolute top-2 right-2 md:top-4 md:right-4 w-8 h-8 md:w-10 md:h-10 bg-[#05192d] rounded-full flex items-center justify-center hover:bg-[#0a2540] transition-colors"
									aria-label="Agregar al carrito"
								>
									<svg
										width="16"
										height="16"
										viewBox="0 0 24 24"
										fill="none"
										xmlns="http://www.w3.org/2000/svg"
										class="md:w-5 md:h-5"
									>
										<path
											d="M3.74181 20.5545C4.94143 22 7.17414 22 11.6395 22H12.3607C16.8261 22 19.0589 22 20.2585 20.5545M3.74181 20.5545C2.54219 19.1091 2.95365 16.9146 3.77657 12.5257C4.36179 9.40452 4.65441 7.84393 5.7653 6.92196M3.74181 20.5545C3.74181 20.5545 3.74181 20.5545 3.74181 20.5545ZM20.2585 20.5545C21.4581 19.1091 21.0466 16.9146 20.2237 12.5257C19.6385 9.40452 19.3459 7.84393 18.235 6.92196M20.2585 20.5545C20.2585 20.5545 20.2585 20.5545 20.2585 20.5545ZM18.235 6.92196C17.1241 6 15.5363 6 12.3607 6H11.6395C8.46398 6 6.8762 6 5.7653 6.92196M18.235 6.92196C18.235 6.92196 18.235 6.92196 18.235 6.92196ZM5.7653 6.92196C5.7653 6.92196 5.7653 6.92196 5.7653 6.92196Z"
											stroke="white"
											stroke-width="2.5"
											fill="none"
										></path>
									</svg>
								</button>
							</div>
							<div class="p-3 md:p-4">
								<p class="text-xs md:text-sm text-gray-600 mb-1 font-family-HelveticaNeue">
									{product.category}
								</p>
								<h3 class="font-semibold text-sm md:text-base text-[#05192d] mb-2 font-family-HelveticaNeue">
									{product.name}
								</h3>
							</div>
						</a>
					))}
				</div>
			</div>
		</main>
		<Footer />

		<script>
			// Funcionalidad de filtros
			(function () {
				const filterButtons = document.querySelectorAll(".filter-btn");
				const productCards = document.querySelectorAll(".product-card");
				let currentFilter = "todos";

				function updateFilter(selectedFilter: string) {
					currentFilter = selectedFilter;

					// Actualizar estilos de botones
					filterButtons.forEach((btn) => {
						const filter = btn.getAttribute("data-filter");
						if (filter === selectedFilter) {
							btn.classList.remove("bg-gray-200", "text-[#05192d]");
							btn.classList.add("bg-[#05192d]", "text-white");
						} else {
							btn.classList.remove("bg-[#05192d]", "text-white");
							btn.classList.add("bg-gray-200", "text-[#05192d]");
						}
					});

				// Mostrar/ocultar productos
				productCards.forEach((card) => {
					const category = card.getAttribute("data-category");
					const htmlCard = card as HTMLElement;
					if (selectedFilter === "todos" || category === selectedFilter) {
						htmlCard.style.display = "block";
					} else {
						htmlCard.style.display = "none";
					}
				});
				}

				// Event listeners para los botones de filtro
				filterButtons.forEach((btn) => {
					btn.addEventListener("click", () => {
						const filter = btn.getAttribute("data-filter");
						if (filter) {
							updateFilter(filter);
						}
					});
				});

				// Inicializar con "Todos"
				updateFilter("todos");
			})();
		</script>
	</body>
</html>
